<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AniMate</title>
    <link rel="icon" href="imgs/Logo.svg">
    <link rel="stylesheet" href="estilos/estiloCanvas.css">
</head>
<body>
    <div id="divcanvas">
    <canvas id="canvas"></canvas>
    <script>
        
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function updateCanvas() {
            
            // Carregar as configurações salvas
            const larguraC = localStorage.getItem('larguracanvas');
            const alturaC = localStorage.getItem('alturacanvas');
            const cor = localStorage.getItem('corCanvas');

            // Garantir que a canvas tenha a largura e altura corretamente definidas
            canvas.width = parseInt(larguraC, 10);
            canvas.height = parseInt(alturaC, 10);
            
            // Alterar a cor de fundo conforme a escolha do usuário
            ctx.fillStyle = cor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // Configurar a canvas ao carregar a página
        window.onload = () => {
            // Chama a função que atualiza a canvas com as configurações do localStorage
            updateCanvas();  
        };
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        canvas.addEventListener('mousedown', (e) => {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });

        canvas.addEventListener('mouseup', () => isDrawing = false);
        canvas.addEventListener('mouseout', () => isDrawing = false);

        canvas.addEventListener('mousemove', (e) => {
            if(!isDrawing) return;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.closePath();

            [lastX, lastY] = [e.offsetX, e.offsetY];
        });
    </script>
    </div>
    <div id="timelineFull">
        <div id="topoTimel"></div>
        <div id="setcamandas"></div>
        <div id="btns"></div>
        <div id="camadas"></div>
        <div id="frames"></div>
    </div>
</body>
</html>